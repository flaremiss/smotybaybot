# 🚀 Бесплатный хостинг Shomy Bay Bot

## 🎯 Концепция

**Бот в облаке (Railway) + Модерация на вашем ПК (ngrok)**

```
┌─────────────────────────────────────────────────────────────┐
│                    ВАША СХЕМА ХОСТИНГА                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🌐 RAILWAY (БЕСПЛАТНО)           💻 ВАШ ПК                 │
│  ┌─────────────────────────┐     ┌─────────────────────────┐ │
│  │  🤖 Telegram Bot        │◄───►│  🎛️ Панель модерации    │ │
│  │  • Обработка сообщений   │     │  • Управление объявлениями│ │
│  │  • Поиск и фильтры      │     │  • Модерация контента   │ │
│  │  • Webhook сервер       │     │  • Статистика           │ │
│  └─────────────────────────┘     └─────────────────────────┘ │
│           ▲                              ▲                  │
│           │                              │                  │
│           │                              │                  │
│  ┌─────────────────────────┐     ┌─────────────────────────┐ │
│  │  🔗 Webhook              │     │  🌐 ngrok tunnel        │ │
│  │  • Получение обновлений  │     │  • Публичный доступ     │ │
│  │  • Обработка команд      │     │  • HTTPS туннель        │ │
│  └─────────────────────────┘     └─────────────────────────┘ │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 💰 Стоимость

| Компонент | Стоимость | Ограничения |
|-----------|-----------|-------------|
| **Railway** | 🆓 Бесплатно | 500 часов/месяц |
| **ngrok** | 🆓 Бесплатно | 1 туннель, переподключения |
| **Ваш ПК** | 🆓 Бесплатно | Только для модерации |

## 🚀 Быстрый старт

### 1️⃣ Подготовка (5 минут)

```bash
# Запустите скрипт настройки
setup-remote-hosting.bat
```

### 2️⃣ GitHub (3 минуты)

1. Создайте репозиторий на GitHub
2. Загрузите папку `railway-deploy`
3. Скопируйте URL репозитория

### 3️⃣ Railway (5 минут)

1. Зайдите на [railway.app](https://railway.app)
2. Войдите через GitHub
3. "New Project" → "Deploy from GitHub repo"
4. Выберите ваш репозиторий

### 4️⃣ Переменные окружения

В Railway добавьте:

```env
BOT_TOKEN=ваш_токен_бота
ADMIN_CHAT_ID=ваш_telegram_id
WEBHOOK_URL=https://ваш-проект.railway.app
MODERATION_URL=https://ваш-ngrok-url.ngrok.io
```

### 5️⃣ Ngrok (2 минуты)

```bash
# Скачайте ngrok с https://ngrok.com/download
# Запустите туннель
setup-ngrok.bat
```

### 6️⃣ Модерация (1 минута)

```bash
# Запустите панель модерации
start_moderation.bat
```

## 📊 Мониторинг

### Railway Dashboard
- **URL**: https://railway.app/dashboard
- **Логи**: Deployments → View Logs
- **Метрики**: CPU, Memory, Network

### Локальная панель
- **URL**: http://localhost:3000
- **Через ngrok**: https://your-url.ngrok.io
- **Статус бота**: https://your-project.railway.app/status

## 🔧 Обновления

### Обновление бота
1. Внесите изменения в код
2. Запушьте в GitHub
3. Railway автоматически перезапустит

### Обновление модерации
1. Остановите `start_moderation.bat`
2. Внесите изменения
3. Запустите снова

## ⚠️ Ограничения и решения

### Railway (Бесплатный план)

| Проблема | Решение |
|----------|---------|
| 🛌 Засыпает через 30 мин | ✅ Keep-alive каждые 5 мин |
| 📊 500 часов/месяц | ✅ Достаточно для бота |
| 💾 1GB RAM | ✅ Оптимизированный код |
| 🔄 Перезапуски | ✅ Автоматическое восстановление |

### ngrok (Бесплатный план)

| Проблема | Решение |
|----------|---------|
| 🔄 Переподключения | ✅ Автоматический рестарт |
| 🌐 1 туннель | ✅ Достаточно для модерации |
| ⏰ Таймауты | ✅ Мониторинг соединения |

## 🛠️ Устранение неполадок

### Бот не отвечает

```bash
# Проверьте логи Railway
# В панели Railway → Deployments → View Logs

# Проверьте переменные окружения
# BOT_TOKEN, ADMIN_CHAT_ID, WEBHOOK_URL

# Проверьте статус
curl https://your-project.railway.app/status
```

### Модерация недоступна

```bash
# Проверьте ngrok
ngrok status

# Перезапустите туннель
setup-ngrok.bat

# Обновите URL в Railway
# MODERATION_URL=https://new-ngrok-url.ngrok.io
```

### Webhook не работает

```bash
# Проверьте WEBHOOK_URL в Railway
# Должен быть: https://your-project.railway.app

# Проверьте доступность
curl https://your-project.railway.app/status
```

## 📈 Масштабирование

### При росте нагрузки

1. **Railway Pro** ($5/месяц)
   - ✅ Неограниченные часы
   - ✅ Больше RAM
   - ✅ Приоритетная поддержка

2. **Database** (PostgreSQL)
   - ✅ Постоянное хранение данных
   - ✅ Резервное копирование
   - ✅ Масштабирование

3. **Redis** (Кэширование)
   - ✅ Быстрый доступ к данным
   - ✅ Сессии пользователей
   - ✅ Временные данные

### Альтернативные платформы

| Платформа | Стоимость | Особенности |
|-----------|-----------|-------------|
| **Render** | 🆓 Бесплатно | Аналогично Railway |
| **Heroku** | 💰 $7/месяц | Стабильный, но платный |
| **DigitalOcean** | 💰 $5/месяц | VPS, полный контроль |

## 🔒 Безопасность

### Railway
- ✅ HTTPS по умолчанию
- ✅ Изолированные контейнеры
- ✅ Автоматические обновления

### ngrok
- ✅ HTTPS туннели
- ✅ Аутентификация (опционально)
- ✅ Ограничение доступа

### Рекомендации
- 🔐 Регулярно обновляйте токены
- 🔐 Используйте сильные пароли
- 🔐 Мониторьте доступы

## 📞 Поддержка

### Railway
- 📖 [Документация](https://docs.railway.app)
- 💬 [Discord](https://discord.gg/railway)
- 🐛 [GitHub Issues](https://github.com/railwayapp/cli/issues)

### ngrok
- 📖 [Документация](https://ngrok.com/docs)
- 💬 [Support](https://ngrok.com/support)

### Shomy Bay
- 📧 Техподдержка: через Telegram
- 🐛 Баги: GitHub Issues
- 💡 Предложения: Telegram чат

## 🎯 Итоговая схема

```
Пользователь → Telegram → Railway Bot → ngrok → Ваш ПК (Модерация)
     ↑              ↑           ↑         ↑              ↑
   Бесплатно    Бесплатно   Бесплатно  Бесплатно     Бесплатно
```

**Общая стоимость: 0₽/месяц** 🎉

---

**Создано**: 25 октября 2025  
**Версия**: 1.0  
**Автор**: Shomy Bay Team
